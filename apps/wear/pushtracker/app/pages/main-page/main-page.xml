<Page xmlns="http://schemas.nativescript.org/tns.xsd"
      xmlns:nac="nativescript-animated-circle"
      xmlns:pager="nativescript-pager"
      xmlns:box="nativescript-wear-os/packages/box-inset-layout"
      xmlns:wol="nativescript-wear-os/packages/wear-os-layout"
      xmlns:ui="nativescript-auto-fit-text"
      navigatingTo="onNavigatedTo" marginBottom="{{ chinSize / 2 }}" actionBarHidden="true">
  <GridLayout rows="*" columns="*">
    <pager:Pager loaded="{{ onPagerLoaded }}" orientation="vertical" height="100%" width="100%" transformer="none" pagesCount="4" showNativePageIndicator="false" disableSwipe="{{ powerAssistActive || isTraining }}">

      // Goal Overview
      <pager:PagerItem>
        <wol:WearOsLayout disableInsetConstraint="true">
          <GridLayout width="100%" height="100%" rows="auto" columns="*">
            // Distance Goal Circle
            <nac:AnimatedCircle row="0" col="0" width="300" height="300" class="distanceCircle" animated="true" animateFrom="0" clockwise="true" rimWidth="2" barWidth="8" progress="{{ distanceGoalCurrentProgress }}">
            </nac:AnimatedCircle>
            // Coast Goal Circle
            <!-- TODO: THIS W/H setting is a hack and shouldn't work! -->
            <nac:AnimatedCircle row="0" col="0" class="coastCircle" width="200" height="200" animated="true" animateFrom="0" clockwise="true" rimWidth="2" barWidth="8" progress="{{ coastGoalCurrentProgress }}">
            </nac:AnimatedCircle>

            <GridLayout height="65%" width="70%" rows="auto, auto, auto, auto, auto" columns="*, auto, *" tap="{{ debugTap }}">
              // distance
              <Label row="0" col="0" class="center-label-base ionicon distance-goal-color compact fs34" text="&#xf125;" />
              <Label row="1" col="0" textWrap="true" class="center-label-base compact fs26 bold" text="{{ distanceGoalCurrentValueDisplay }}" />
              <Label row="2" col="0" textWrap="true" class="center-label-base compact fs14" text="{{ distanceUnits }}" />
              // coast
              <Label row="0" col="2" class="center-label-base ionicon coast-goal-color compact fs34" text="&#xf125; &#xf125;" />
              <Label row="1" col="2" textWrap="true" class="center-label-base compact fs26 bold" text="{{ coastGoalCurrentValueDisplay }}" />
              <Label row="2" col="2" textWrap="true" class="center-label-base compact fs14" text="{{ L('goals.coast.units') }}" />
              // pushes
              <Label row="3" col="1" textWrap="true" class="center-label-base compact fs18 bold" verticalAlignment="bottom" text="{{ currentPushCountDisplay }}" />
              <Label row="4" col="1" textWrap="true" class="center-label-base compact fs14" verticalAlignment="bottom" text="{{ L('pushes.units') }}" />
            </GridLayout>
          </GridLayout>
        </wol:WearOsLayout>
      </pager:PagerItem>

      // Coast Time Chart
      <pager:PagerItem>
        <box:BoxInsetLayout>
          <GridLayout width="100%" height="100%" rows="auto, auto, *" columns="*, auto" tap="{{ debugChartTap }}">
            <ui:AutoFitText height="15" row="0" colSpan="2" text="{{ L('charts.coast.title') }}" class="chart-title" textWrap="true"/>
            <Label text="" row="1" col="0" class="hr-blue" />
            <Label text="{{ coastChartMaxValue }}" row="1" col="1" class="chart-max-value" padding="0 0 0 5"/>
            // Coast Usage Bar Chart
            <GridLayout rows="*, auto" columns="*, *, *, *, *, *, *" row="2" colSpan="2" width="100%" class="chart-stack">
              <Label col="0" height="{{ coastChartData[0].value }}" class="coast-line"/>
              <Label col="0" row="1" text="{{ coastChartData[0].day }}" class="line-label" />
              <Label col="1" height="{{ coastChartData[1].value }}" class="coast-line"/>
              <Label col="1" row="1" text="{{ coastChartData[1].day }}" class="line-label" />
              <Label col="2" height="{{ coastChartData[2].value }}" class="coast-line"/>
              <Label col="2" row="1" text="{{ coastChartData[2].day }}" class="line-label" />
              <Label col="3" height="{{ coastChartData[3].value }}" class="coast-line"/>
              <Label col="3" row="1" text="{{ coastChartData[3].day }}" class="line-label" />
              <Label col="4" height="{{ coastChartData[4].value }}" class="coast-line"/>
              <Label col="4" row="1" text="{{ coastChartData[4].day }}" class="line-label" />
              <Label col="5" height="{{ coastChartData[5].value }}" class="coast-line"/>
              <Label col="5" row="1" text="{{ coastChartData[5].day }}" class="line-label" />
              <Label col="6" height="{{ coastChartData[6].value }}" class="coast-line"/>
              <Label col="6" row="1" text="{{ coastChartData[6].day }}" class="line-label" />
            </GridLayout>
          </GridLayout>
        </box:BoxInsetLayout>
      </pager:PagerItem>

      // Distance Traveled Chart
      <pager:PagerItem>
        <box:BoxInsetLayout>
          <GridLayout width="100%" height="100%" rows="auto, auto, *" columns="*, auto" tap="{{ debugChartTap }}">
            // Chart Title
            <ui:AutoFitText height="15" row="0" colSpan="8" text="{{ L('charts.distance.title') + ' (' + distanceUnits + ')' }}" class="chart-title" textWrap="true" />
            <Label text="" row="1" col="0" class="hr-blue" />
            <Label text="{{ distanceChartMaxValue }}" row="1" col="1" class="chart-max-value" padding="0 0 0 5"/>
            // Distance Traveled Bar Chart
            <GridLayout rows="*, auto" columns="*, *, *, *, *, *, *" row="2" colSpan="2" width="100%" class="chart-stack">
              <Label col="0" height="{{ distanceChartData[0].value }}" class="distance-line"/>
              <Label col="0" row="1" text="{{ distanceChartData[0].day }}" class="line-label" />
              <Label col="1" height="{{ distanceChartData[1].value }}" class="distance-line"/>
              <Label col="1" row="1" text="{{ distanceChartData[1].day }}" class="line-label" />
              <Label col="2" height="{{ distanceChartData[2].value }}" class="distance-line"/>
              <Label col="2" row="1" text="{{ distanceChartData[2].day }}" class="line-label" />
              <Label col="3" height="{{ distanceChartData[3].value }}" class="distance-line"/>
              <Label col="3" row="1" text="{{ distanceChartData[3].day }}" class="line-label" />
              <Label col="4" height="{{ distanceChartData[4].value }}" class="distance-line"/>
              <Label col="4" row="1" text="{{ distanceChartData[4].day }}" class="line-label" />
              <Label col="5" height="{{ distanceChartData[5].value }}" class="distance-line"/>
              <Label col="5" row="1" text="{{ distanceChartData[5].day }}" class="line-label" />
              <Label col="6" height="{{ distanceChartData[6].value }}" class="distance-line"/>
              <Label col="6" row="1" text="{{ distanceChartData[6].day }}" class="line-label" />
            </GridLayout>
          </GridLayout>
        </box:BoxInsetLayout>
      </pager:PagerItem>

      // Menu Items
      <pager:PagerItem>
        <wol:WearOsLayout disableInsetConstraint="true" loaded="{{ customWOLInsetLoaded }}" height="100%" width="100%">
          <StackLayout height="100%">
            <Label text="{{ L('menu.title') }}" class="chart-title" textWrap="true" />
            <Label class="hr-blue" />
            <ScrollView height="100%">
              <GridLayout rows="*, *, *, *, *, *" columns="auto, *" paddingBottom="{{ insetPadding }}">
                <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                <Label row="0" col="1" text="{{ L('settings.title') }}" tap="{{ onSettingsTap }}" class="settings-label" textWrap="true" />
                <Label row="1" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                <Label row="1" col="1" text="{{ L('menu.about') }}" tap="{{ onAboutTap }}" class="settings-label" textWrap="true" />
                <Label row="2" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                <Label row="2" col="1" text="{{ L('settings.connect-pushtracker') }}" tap="{{ onConnectPushTrackerTap }}" class="settings-label" textWrap="true" />
                <Label row="3" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" visibility="{{ isSmartDriveAppInstalled ? 'collapsed':'visible' }}" />
                <Label row="3" col="1" text="{{ L('settings.install-smartdrive') }}" tap="{{ onInstallSmartDriveTap }}" class="settings-label"
                       textWrap="true" visibility="{{ isSmartDriveAppInstalled ? 'collapsed':'visible' }}" />
              </GridLayout>
            </ScrollView>
          </StackLayout>
        </wol:WearOsLayout>
      </pager:PagerItem>

    </pager:Pager>

  </GridLayout>
</Page>
