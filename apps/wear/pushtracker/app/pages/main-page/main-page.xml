<Page xmlns="http://schemas.nativescript.org/tns.xsd" 
  xmlns:nac="nativescript-animated-circle" 
  xmlns:wol="nativescript-wear-os/packages/wear-os-layout" navigatedTo="onNavigatedTo" marginBottom="{{ chinSize / 2 }}" actionBarHidden="true">
  <GridLayout rows="*" columns="*">
    <ScrollView>
      <StackLayout>
        // Goal Overview
        <wol:WearOsLayout disableInsetConstraint="true">
          <GridLayout width="100%" height="100%" rows="auto" columns="*">
            // Distance Goal Circle
            <nac:AnimatedCircle row="0" col="0" width="300" height="300" class="distanceCircle" animated="true" animateFrom="0" clockwise="true" rimWidth="2" barWidth="8" progress="{{ distanceGoalCurrentProgress }}">
            </nac:AnimatedCircle>
            // Coast Goal Circle                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             <!-- TODO: THIS W/H setting is a hack and shouldn't work! -->
            <nac:AnimatedCircle row="0" col="0" class="coastCircle" width="200" height="200" animated="true" animateFrom="0" clockwise="true" rimWidth="2" barWidth="8" progress="{{ coastGoalCurrentProgress }}">
            </nac:AnimatedCircle>

            <GridLayout height="65%" width="70%" rows="auto, auto, auto, auto, auto" columns="*, auto, *" tap="{{ debugTap }}">
              // distance
              <Label row="0" col="0" class="center-label-base ionicon distance-goal-color compact fs34" text="&#xf125;" />
              <Label row="1" col="0" textWrap="true" class="center-label-base compact fs26 bold" text="{{ distanceGoalCurrentValueDisplay }}" />
              <Label row="2" col="0" textWrap="true" class="center-label-base compact fs14" text="{{ distanceUnits }}" />
              // coast
              <Label row="0" col="2" class="center-label-base ionicon coast-goal-color compact fs34" text="&#xf125; &#xf125;" />
              <Label row="1" col="2" textWrap="true" class="center-label-base compact fs26 bold" text="{{ coastGoalCurrentValueDisplay }}" />
              <Label row="2" col="2" textWrap="true" class="center-label-base compact fs14" text="{{ L('goals.coast.units') }}" />
              // pushes
              <Label row="3" col="1" textWrap="true" class="center-label-base compact fs18 bold" verticalAlignment="bottom" text="{{ currentPushCountDisplay }}" />
              <Label row="4" col="1" textWrap="true" class="center-label-base compact fs14" verticalAlignment="bottom" text="{{ L('pushes.units') }}" />
            </GridLayout>
          </GridLayout>
        </wol:WearOsLayout>

        // Distance Chart
        <wol:WearOsLayout>
          <GridLayout width="100%" height="100%" rows="auto, auto, *" columns="*, auto">
            <Label row="0" colSpan="2" text="{{ L('charts.distance.title') + ' (' + distanceUnits + ')' }}" class="chart-title" textWrap="true" />
            <Label text="" row="1" col="0" class="hr-blue" />
            <Label text="{{ distanceChartMaxValue }}" row="1" col="1" class="chart-max-value" padding="0 0 0 5"/>
            // Distance Usage Bar Chart
            <Repeater row="2" colSpan="2" verticalAlignment="bottom" items="{{ distanceChartData }}">
              <Repeater.itemsLayout>
                <FlexboxLayout justifyContent="space-between" flexDirection="row" />
              </Repeater.itemsLayout>
              <Repeater.itemTemplate>
                <GridLayout rows="*, auto" columns="auto" class="chart-stack">
                  <Label height="{{ value }}" class="distance-line" visibility="{{ value > 0 ? 'visible':'collapsed' }}"/>
                  <Label height="100" class="distance-line" backgroundColor="black" visibility="{{ value > 0 ? 'collapsed':'visible' }}"/>
                  <Label row="1" text="{{ day }}" class="line-label" />
                </GridLayout>
              </Repeater.itemTemplate>
            </Repeater>
          </GridLayout>
        </wol:WearOsLayout>

        // Coast Chart
        <wol:WearOsLayout>
          <GridLayout width="100%" height="100%" rows="auto, auto, *" columns="*, auto">
            // Chart Title
            <Label row="0" colSpan="8" text="{{ L('charts.coast.title') }}" class="chart-title" textWrap="true" />
            <Label text="" row="1" col="0" class="hr-blue" />
            <Label text="{{ coastChartMaxValue }}" row="1" col="1" class="chart-max-value" padding="0 0 0 5"/>
            // Distance Traveled Bar Chart
            <Repeater row="2" colSpan="2" items="{{ coastChartData }}">
              <Repeater.itemsLayout>
                <FlexboxLayout justifyContent="space-between" flexDirection="row" />
              </Repeater.itemsLayout>
              <Repeater.itemTemplate>
                <GridLayout rows="*, auto" columns="auto" class="chart-stack">
                  <Label height="{{ value }}" class="coast-line" visibility="{{ value > 0 ? 'visible':'collapsed' }}"/>
                  <Label height="100" class="coast-line" backgroundColor="black" visibility="{{ value > 0 ? 'collapsed':'visible' }}"/>
                  <Label row="1" text="{{ day }}" class="line-label" />
                </GridLayout>
              </Repeater.itemTemplate>
            </Repeater>
          </GridLayout>
        </wol:WearOsLayout>

        // Menu Items
        <wol:WearOsLayout marginBottom="{{ insetPadding }}">
          <GridLayout rows="*, *, *, *, *, *" columns="auto, *" height="100%" width="100%">
            <Label row="0" colSpan="2" text="{{ L('menu.title') }}" class="chart-title" textWrap="true" />
            <Label row="1" colSpan="2" class="hr-blue" />
            <Label row="2" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
            <Label row="2" col="1" text="{{ L('settings.title') }}" tap="{{ onSettingsTap }}" class="settings-label" textWrap="true" />
            <Label row="3" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
            <Label row="3" col="1" text="{{ L('menu.about') }}" tap="{{ onAboutTap }}" class="settings-label" textWrap="true" />
            <Label row="4" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
            <Label row="4" col="1" text="{{ L('settings.connect-pushtracker') }}" id="connectPushTracker" tap="{{ onConnectPushTrackerTap }}" class="settings-label" textWrap="true" />
            <Label row="5" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" visibility="{{ isSmartDriveAppInstalled ? 'collapsed':'visible' }}" />
            <Label row="5" col="1" text="{{ L('settings.install-smartdrive') }}" id="installSmartDrive" tap="{{ onInstallSmartDriveTap }}" class="settings-label" textWrap="true" visibility="{{ isSmartDriveAppInstalled ? 'collapsed':'visible' }}" />
          </GridLayout>
        </wol:WearOsLayout>
      </StackLayout>
    </ScrollView>

    <GridLayout rows="*, *" columns="*" backgroundColor="#000" width="100%" height="100%" verticalAlignment="center" visibility="{{ isBusy ? 'visible':'collapsed' }}">
      <ActivityIndicator row="0" busy="{{ isBusy }}" color="#006ea4" verticalAlignment="center" horizontalAlignment="center" />
      <Label row="1" class="center-label-base fs20" text="{{ busyText }}" textWrap="true" verticalAlignment="center" horizontalAlignment="center" />
    </GridLayout>

  </GridLayout>
</Page>
