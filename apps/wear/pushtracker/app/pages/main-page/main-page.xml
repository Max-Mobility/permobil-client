<Page xmlns="http://schemas.nativescript.org/tns.xsd"
      xmlns:nac="nativescript-animated-circle"
      xmlns:wol="nativescript-wear-os/packages/wear-os-layout"
      xmlns:sdl="nativescript-wear-os/packages/swipe-dismiss-layout"
      xmlns:RL="nativescript-ng-ripple/ripple-view"
      xmlns:ui="nativescript-auto-fit-text"
      loaded="onMainPageLoaded"
      navigatingTo="navigatingTo"
      actionBarHidden="true">
  <GridLayout rows="*" columns="*" width="100%" height="100%">
    <ScrollView visibility="{{ enabledLayout.main, enabledLayout.main ? 'visible':'collapsed' }}">
      <StackLayout>
        // Goal Overview
        <wol:WearOsLayout
            disableInsetConstraint="true">
          <GridLayout rows="*" columns="*" width="100%" height="100%">
            // Distance Goal Circle
            <nac:AnimatedCircle
                class="distanceCircle"
                row="0" col="0"
                width="{{ screenWidth }}" height="{{ screenHeight }}"
                animated="true" animateFrom="0" clockwise="true"
                rimWidth="2" barWidth="8"
                progress="{{ distanceGoalCurrentProgress }}">
            </nac:AnimatedCircle>
            // Coast Goal Circle
            <!-- TODO: THIS W/H setting is a hack and shouldn't work! -->
            <nac:AnimatedCircle
                class="coastCircle"
                row="0" col="0"
                width="{{ screenWidth / 2 }}" height="{{ screenHeight / 2 }}"
                animated="true" animateFrom="0" clockwise="true"
                rimWidth="2" barWidth="8"
                progress="{{ coastGoalCurrentProgress }}">
            </nac:AnimatedCircle>
            <GridLayout
                row="0" col="0"
                width="90%" height="90%"
                tap="{{ debugTap }}"
                rows="*, auto" columns="*">
              <GridLayout rows="*" columns="*, *" row="0" marginTop="10">
                <StackLayout col="0">
                  // distance
                  <Label class="center-label-base ionicon distance-goal-color compact fs34"
                         text="&#xf125;" />
                  <Label textWrap="true"
                         class="center-label-base compact fs26 bold"
                         text="{{ distanceGoalCurrentValueDisplay }}" />
                  <Label textWrap="true"
                         class="center-label-base compact fs14"
                         text="{{ distanceUnits }}" />
                </StackLayout>
                <StackLayout col="1">
                  // coast
                  <Label class="center-label-base ionicon coast-goal-color compact fs34"
                         text="&#xf125; &#xf125;" />
                  <Label textWrap="true"
                         class="center-label-base compact fs26 bold"
                         text="{{ coastGoalCurrentValueDisplay }}" />
                  <Label textWrap="true"
                         class="center-label-base compact fs14"
                         text="{{ L('goals.coast.units') }}" />
                </StackLayout>
              </GridLayout>
              <StackLayout row="1" verticalAlignment="bottom">
                // pushes
                <Label textWrap="true"
                       class="center-label-base compact fs18 bold"
                       text="{{ currentPushCountDisplay }}" />
                <Label textWrap="true"
                       class="center-label-base compact fs14"
                       text="{{ L('pushes.units') }}" />
              </StackLayout>
            </GridLayout>
          </GridLayout>
        </wol:WearOsLayout>

        // Distance Chat
        <wol:WearOsLayout>
          <GridLayout rows="auto, auto, *" columns="*, auto">
            <Label row="0" colSpan="2" text="{{ L('charts.distance.title') }}"
                   class="chart-title" textWrap="true" />
            <Label text="" row="1" col="0" class="hr-blue" />
            <Label text="{{ distanceChartMaxValue }}"
                   row="1" col="1" class="chart-max-value" padding="0 0 0 5"/>
            // Distance Usage Bar Chart
            <Repeater row="2" colSpan="2" verticalAlignment="bottom"
                      items="{{ distanceChartData }}">
              <Repeater.itemsLayout>
                <FlexboxLayout justifyContent="space-between" flexDirection="row" />
              </Repeater.itemsLayout>
              <Repeater.itemTemplate>
                <StackLayout class="chart-stack">
                  <Label height="{{ value }}" class="distance-line" />
                  <Label text="{{ day }}" class="line-label" />
                </StackLayout>
              </Repeater.itemTemplate>
            </Repeater>
          </GridLayout>
        </wol:WearOsLayout>

        // Coast Chart
        <wol:WearOsLayout>
          <GridLayout rows="auto, auto, *" columns="*, auto">
            // Chart Title
            <Label row="0" colSpan="8" text="{{ L('charts.coast.title') }}"
                   class="chart-title" textWrap="true" />
            <Label text="" row="1" col="0" class="hr-blue" />
            <Label text="{{ coastChartMaxValue }}" row="1" col="1"
                   class="chart-max-value" padding="0 0 0 5"/>
            // Distance Traveled Bar Chart
            <Repeater row="2" colSpan="2"
                      items="{{ coastChartData }}">
              <Repeater.itemsLayout>
                <FlexboxLayout justifyContent="space-between" flexDirection="row" />
              </Repeater.itemsLayout>
              <Repeater.itemTemplate>
                <StackLayout class="chart-stack">
                  <Label height="{{ value }}" class="coast-line" />
                  <Label text="{{ day }}" class="line-label" />
                </StackLayout>
              </Repeater.itemTemplate>
            </Repeater>
          </GridLayout>
        </wol:WearOsLayout>

        // Menu Page
        <wol:WearOsLayout marginBottom="{{ insetPadding }}">
          <GridLayout rows="*,*,*,*,*" columns="*" height="100%">
            <GridLayout row="0" rows="*, *" columns="*">
              <Label text="{{ L('menu.title') }}" class="chart-title" textWrap="true" />
              <Label text="" row="1" col="0" class="hr-blue" />
            </GridLayout>
            <RL:Ripple row="1" rippleColor="#ddd">
              <GridLayout rows="*" columns="15, *" tap="{{ onProfileTap }}">
                <Label col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                <Label col="1" text="{{ L('menu.profile') }}" class="settings-label" textWrap="true" />
              </GridLayout>
            </RL:Ripple>
            <RL:Ripple row="3" rippleColor="#ddd">
              <GridLayout rows="*" columns="15, *" tap="{{ onAboutTap }}">
                <Label col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                <Label col="1" text="{{ L('menu.about') }}" class="settings-label" textWrap="true" />
              </GridLayout>
            </RL:Ripple>
          </GridLayout>
        </wol:WearOsLayout>
      </StackLayout>
    </ScrollView>

    // Settings Layout "Page" -- need to wrap this in a component
    <sdl:SwipeDismissLayout loaded="{{ onSettingsLayoutLoaded }}"
                            class="page" translateX="500"
                            visibility="{{ enabledLayout.settings, enabledLayout.settings ? 'visible':'collapsed' }}">
      <wol:WearOsLayout
          disableInsetConstraint="true"
          loaded="{{ customWOLInsetLoaded }}"
          height="100%" width="100%">
        <StackLayout height="100%">
          <Label text="{{ L('settings.title') }}" class="chart-title" textWrap="true" />
          <Label text="" row="1" col="0" class="hr-blue" />
          <ScrollView height="100%" id="settingsScrollView">
            <StackLayout paddingBottom="{{ insetPadding }}">
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" id="editProfile" tap="{{ onEditProfileTap }}">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('settings.edit-profile') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" id="distanceGoal" tap="{{ onChangeSettingsItemTap }}">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('settings.distancegoal.title') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" id="coastGoal" tap="{{ onChangeSettingsItemTap }}">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('settings.coastgoal.title') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" id="units" tap="{{ onChangeSettingsItemTap }}">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('settings.units.title') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" tap="{{ previousLayout }}">
                  <Label row="0" col="0" text="&#xf107;" class="back-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('buttons.back') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
            </StackLayout>
          </ScrollView>
        </StackLayout>
      </wol:WearOsLayout>
    </sdl:SwipeDismissLayout>

    // Edit Profile Layout "Page" -- need to wrap this in a component
    <sdl:SwipeDismissLayout loaded="{{ onProfileLayoutLoaded }}"
                            class="page" translateX="500"
                            visibility="{{ enabledLayout.profile, enabledLayout.profile ? 'visible':'collapsed' }}">
      <wol:WearOsLayout
          disableInsetConstraint="true"
          loaded="{{ customWOLInsetLoaded }}"
          height="100%" width="100%">
        <StackLayout height="100%">
          <Label text="{{ L('profile') }}" class="chart-title" textWrap="true" />
          <Label text="" row="1" col="0" class="hr-blue" />
          <ScrollView height="100%" id="profileScrollView">
            <StackLayout paddingBottom="{{ insetPadding }}">
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" id="weight" tap="{{ onChangeSettingsItemTap }}">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('settings.weight.title') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" id="height" tap="{{ onChangeSettingsItemTap }}">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('settings.height.title') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" id="chairInfo" tap="{{ onChangeSettingsItemTap }}">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('settings.chairinfo.title') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" tap="{{ previousLayout }}">
                  <Label row="0" col="0" text="&#xf107;" class="back-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('buttons.back') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
            </StackLayout>
          </ScrollView>
        </StackLayout>
      </wol:WearOsLayout>
    </sdl:SwipeDismissLayout>

    // Change Settings Layout "Page" -- need to wrap this in a component
    <sdl:SwipeDismissLayout height="100%" width="100%"
                            id="changeSettingsPage"
                            loaded="{{ onChangeSettingsLayoutLoaded }}"
                            class="page" translateX="500"
                            visibility="{{ enabledLayout.changeSettings, enabledLayout.changeSettings ? 'visible':'collapsed' }}">
      <GridLayout rows="auto, *, auto" columns="auto, *, auto" width="100%" height="100%">
        // Increase the config value
        <RL:Ripple row="0" col="1" rippleColor="#ddd" class="increase-btn">
          <StackLayout tap="{{ onIncreaseSettingsTap }}">
            <Label text="&#xf126;" fontSize="36" />
          </StackLayout>
        </RL:Ripple>
        // Cancel Button - closes the layout
        <RL:Ripple row="1" col="0" rippleColor="#ddd" class="cancel-btn">
          <StackLayout tap="{{ onCancelChangesTap }}">
            <Label text="&#xf404;" fontSize="42" />
          </StackLayout>
        </RL:Ripple>
        <StackLayout row="1" col="1" class="value-circle"
                     tap="{{ onSettingsInfoItemTap }}">
          <Label text="{{ changeSettingKeyValue }}"
                 class="changeSettingsValue" textWrap="true" />
          <Label text="{{ changeSettingKeyString }}"
                 textWrap="true"
                 class="changeSettingsTitle no-margin"/>
          <Label text="&#xf149;"
                 class="ionicon center-label-base bold fs16 compact"/>
        </StackLayout>
        // Confirm button - will save the changes
        <RL:Ripple row="1" col="2" rippleColor="#ddd" class="confirm-btn">
          <StackLayout tap="{{ onConfirmChangesTap }}">
            <Label text="&#xf3fd;" fontSize="42" />
          </StackLayout>
        </RL:Ripple>
        // Decrease the config value
        <RL:Ripple row="2" col="1" rippleColor="#ddd" class="decrease-btn">
          <StackLayout tap="{{ onDecreaseSettingsTap }}">
            <Label text="&#xf123;" fontSize="36" />
          </StackLayout>
        </RL:Ripple>
      </GridLayout>
    </sdl:SwipeDismissLayout>

    // About "Page" -- need to wrap this in a component
    <sdl:SwipeDismissLayout loaded="{{ onAboutLayoutLoaded }}"
                            class="page" translateX="500"
                            visibility="{{ enabledLayout.about, enabledLayout.about ? 'visible':'collapsed' }}">
      <wol:WearOsLayout
          disableInsetConstraint="true"
          loaded="{{ customWOLInsetLoaded }}"
          height="100%" width="100%">
        <StackLayout height="100%">
          <Label text="{{ L('about.title') }}" class="chart-title" textWrap="true" />
          <Label text="" row="1" col="0" class="hr-blue" />
          <ScrollView height="100%" id="aboutScrollView">
            <StackLayout paddingBottom="{{ insetPadding }}">
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="auto, auto" columns="15, *">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('about.watch-serial-number') }}" class="settings-label" textWrap="true" />
                  <Label row="1" col="1" text="{{ watchSerialNumber }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="auto, auto" columns="15, *">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('about.version') }}" class="settings-label" textWrap="true" />
                  <Label row="1" col="1" text="{{ appVersion }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="auto, auto" columns="15, *">
                  <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('about.database') }}" class="settings-label" textWrap="true" />
                  <Label row="1" col="1" text="{{ databaseId }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
              <RL:Ripple rippleColor="#ddd">
                <GridLayout rows="*" columns="15, *" tap="{{ previousLayout }}">
                  <Label row="0" col="0" text="&#xf107;" class="back-icon" textWrap="true" />
                  <Label row="0" col="1" text="{{ L('buttons.back') }}" class="settings-label" textWrap="true" />
                </GridLayout>
              </RL:Ripple>
            </StackLayout>
          </ScrollView>
        </StackLayout>
      </wol:WearOsLayout>
    </sdl:SwipeDismissLayout>

  </GridLayout>

</Page>
