// profile tab layout
<GridLayout (loaded)="onProfileTabLoaded()" (unloaded)="onProfileTabUnloaded()" rows="*, auto, *" columns="*" class="profile-tab-layout">
  // main profile-tab layout
  <GridLayout row="0" rowSpan="3" col="0" rows="auto, *, auto" columns="*">
    // Mock ActionBar
    <MockActionBar row="0" [showBackNav]="false" [showSettingsBtn]="true" [showSupportBtn]="true" [user]="user">
      <e2-status-button #e2StatusButton id="e2StatusButton" *ngIf="user?.data.control_configuration === CONFIGURATIONS.PUSHTRACKER_E2_WITH_SMARTDRIVE"></e2-status-button>
    </MockActionBar>

    <ScrollView row="1" rowSpan="2" col="0" padding="10" height="100%" width="100%" iosOverflowSafeArea="false">
      <GridLayout rows="*, *, *, *, *, *, *, *, *, *, *, *, *, *, *, *" columns="*, *, *, *" iosOverflowSafeArea="false">
        // Page Title
        <Label row="0" col="0" colSpan="4" class="page-title" [text]="'profile-tab.title' | translate" textWrap="true"></Label>

        <GridLayout columns="auto, *" rows="auto" row="1" rowSpan="2" colSpan="4">
          // User Avatar
          <GridLayout class="avatar-circle" (tap)="onAvatarTap()">
            <Label [visibility]="!user?.data.profile_picture ? 'visible' : 'collapsed'" [text]="user?.data.first_name.charAt(0)" textWrap="true"></Label>
            <Image [visibility]="user?.data.profile_picture ? 'visible' : 'collapsed'" [src]="user?.data.profile_picture" stretch="aspectFit"></Image>
          </GridLayout>

          <GridLayout col="1" rows="*, *" columns="*, auto" verticalAlignment="center">
            // User Name
            <Label row="0" col="0" class="profile-name" [text]="user?.data.first_name + ' ' + user?.data.last_name" textWrap="true"></Label>
            // User Email
            <Label row="1" col="0" class="profile-email" [text]="user?.username" textWrap="true"></Label>
            // Privacy Policy Button
            <Button rowSpan="2" col="1" (tap)="onPrivacyTap()" class="privacy-btn" text="&#xe32a;" ripple rippleColorAlpha="0.18"></Button>
          </GridLayout>
        </GridLayout>

        // Activity Goals Label
        <label col="0" row="3" colSpan="4" class="section-label" [text]="'profile-tab.activity-goals' | translate"></label>

        // Horizontal Line
        <StackLayout row="4" col="0" colspan="4" class="hr"></StackLayout>

        // Coast Time
        <StackLayout row="5" col="0" colSpan="2" class="data-box" (tap)="onActivityGoalTap($event, 'coast-time', 'coast-time-description', 'COAST_TIME_ACTIVITY_GOAL')">
          <Label class="data-box-label" [text]="'general.coast-time' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="displayActivityGoalCoastTime" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Distance
        <StackLayout row="5" col="2" colSpan="2" class="data-box" (tap)="onActivityGoalTap($event, 'distance', 'distance-description', 'DISTANCE_ACTIVITY_GOAL')">
          <Label class="data-box-label" [text]="'general.distance' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="displayActivityGoalDistance" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // About You Label
        <Label row="6" col="0" colSpan="4" class="section-label" [text]="'profile-tab.about-you' | translate"></Label>

        // Horizontal Line
        <StackLayout row="7" col="0" colspan="4" class="hr"></StackLayout>

        // First Name Box
        <StackLayout row="8" col="0" colSpan="2" class="data-box" (tap)="onFirstNameTap($event)">
          <Label class="data-box-label" [text]="'general.first-name' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="user?.data.first_name" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Last Name Box
        <StackLayout row="8" col="2" colSpan="2" class="data-box" (tap)="onLastNameTap($event)">
          <Label class="data-box-label" [text]="'general.last-name' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="user?.data.last_name" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Gender Box
        <StackLayout row="9" col="0" colSpan="2" class="data-box" (tap)="onGenderTap($event)">
          <Label class="data-box-label" [text]="'general.gender' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="displayGender" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Birthday Box
        <StackLayout row="9" col="2" colSpan="2" class="data-box" (tap)="onBirthDateTap($event)">
          <Label class="data-box-label" [text]="'general.birthday' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="user?.data.dob | date" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Weight Box
        <StackLayout row="10" col="0" colSpan="2" class="data-box" (tap)="onWeightTap($event)">
          <Label class="data-box-label" [text]="'general.weight' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="displayWeight" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Height Box
        <StackLayout row="10" col="2" colSpan="2" class="data-box" (tap)="onHeightTap($event)">
          <Label class="data-box-label" [text]="'general.height' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="displayHeight" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Chair Type Box
        <StackLayout row="11" col="0" colSpan="2" class="data-box" (tap)="onChairTypeTap($event)">
          <Label class="data-box-label" [text]="'general.chair-type' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="displayChairType" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Chair Make Box
        <StackLayout row="11" col="2" colSpan="2" class="data-box" (tap)="onChairMakeTap($event)">
          <Label class="data-box-label" [text]="'profile-tab.chair-make' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="displayChairMake" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Control Configuration
        <StackLayout row="12" col="0" colSpan="4" class="data-box" (tap)="onControlConfigTap($event)">
          <Label class="data-box-label" [text]="'profile-tab.control-configuration' | translate"></Label>
          <GridLayout rows="*" columns="auto, *, auto">
            <Image col="0" class="data-box-icon" [src]="displayControlConfigurationImage" stretch="aspectFit"></Image>
            <Label col="1" class="data-box-value" [text]="displayControlConfiguration" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>

        // Device Serial Numbers
        <Label row="13" col="0" colSpan="3" class="section-label" [text]="'profile-tab.device-serial-numbers' | translate"></Label>
        <Button
          *ngIf="user?.data.control_configuration !== CONFIGURATIONS.SWITCHCONTROL_WITH_SMARTDRIVE"
          row="13"
          col="3"
          horizontalAlignment="right"
          verticalAlignment="center"
          ripple
          rippleColorAlpha="0.18"
          class="device-setup-btn"
          (tap)="onDeviceSetupTap($event)"
          text="&#xe0de;"
        ></Button>

        // Horizontal Line
        <StackLayout row="14" col="0" colspan="4" class="hr"></StackLayout>

        // SmartDrive Serial Number
        <StackLayout row="15" col="0" [colSpan]="user?.data.control_configuration === CONFIGURATIONS.SWITCHCONTROL_WITH_SMARTDRIVE ? 4 : 2" class="data-box">
          <Label class="data-box-label" [text]="'profile-tab.smartdrive' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label height="100%" (loaded)="onLabelLoaded($event)" col="0" class="data-box-value" [text]="user?.data.smartdrive_serial_number || ' '" textWrap="true" (tap)="onEditSerialNumber('smartdrive')"></Label>
            <Label col="1" class="data-box-arrow" fontSize="20" paddingRight="5" text="&#xe412;" (tap)="onScan('smartdrive')"></Label>
          </GridLayout>
        </StackLayout>

        // Pushtracker Serial Number // https://github.com/Max-Mobility/permobil-client/issues/279 // If the user has PushTracker then we show the current PushTracker serial number // field that includes the QR code reader for reading the
        OGPT qr code
        <StackLayout *ngIf="user?.data.control_configuration === CONFIGURATIONS.PUSHTRACKER_WITH_SMARTDRIVE" row="15" col="2" colSpan="2" class="data-box">
          <Label class="data-box-label" [text]="'profile-tab.pushtracker' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label height="100%" (loaded)="onLabelLoaded($event)" col="0" class="data-box-value" [text]="user?.data.pushtracker_serial_number || ' '" textWrap="true" (tap)="onEditSerialNumber('pushtracker')"></Label>
            <Label col="1" class="data-box-arrow" fontSize="20" paddingRight="5" text="&#xe412;" (tap)="onScan('pushtracker')"></Label>
          </GridLayout>
        </StackLayout>

        // Pushtracker E2 Serial Number // https://github.com/Max-Mobility/permobil-client/issues/279 // If the user has PushTracker E2 then we show a read-only PushTracker E2 serial number field // which shows the serial number saved with
        the user account (comes from the wear apps). // If the user presses on the field, then we show a dialog indicating that the // serial number comes from the wear os apps.
        <StackLayout *ngIf="user?.data.control_configuration === CONFIGURATIONS.PUSHTRACKER_E2_WITH_SMARTDRIVE" row="15" col="2" colSpan="2" class="data-box" (tap)="onPushTrackerE2SerialNumberTap($event)">
          <Label class="data-box-label" [text]="'profile-tab.pushtracker-e2' | translate"></Label>
          <GridLayout rows="*" columns="*, auto">
            <Label col="0" class="data-box-value" [text]="user?.data.pushtracker_serial_number" textWrap="true"></Label>
          </GridLayout>
        </StackLayout>
      </GridLayout>
    </ScrollView>
  </GridLayout>
</GridLayout>
